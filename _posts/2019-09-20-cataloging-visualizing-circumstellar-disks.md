---
title: "Cataloging and Visualizing Cradles of Planet Formation"
published: 2019-09-20
excerpt: "A research blog to track my master project at Leiden University. The project contains two parts: to build an online web database for a catalog of circumstellar disks and to design a 3D disk model reconstructed from 2D data. "
permalink: /posts/2019/09/cataloging-visualizing-circumstellar-disks
---
You can check the [source code](https://github.com/rywjhzd/Cataloging-and-Visualising-Cradles-of-Planet-Formation) and [visualize](https://htmlpreview.github.io/?https://github.com/rywjhzd/Cataloging-and-Visualising-Cradles-of-Planet-Formation/blob/master/diskmodel/disk_model_test.html) the disk.


## Week 1 -- Beginning of the project
### September 20, 2019
Spent an hour today with Matt and Christian discussing the blueprint of this project. Feel really excited. Hope this year will go well. 
![](https://raw.githubusercontent.com/rywjhzd/rywjhzd.github.io/master/images/blog/2019-09-20.jpg)

### September 21, 2019
Worked on GSD.

### September 22, 2019
Worked on PSF and BPH. Started to learn how to create a database using Python from some videos and online tutorials. Still need to read more. 

### September 23, 2019
I found that latex typing works is actually a pretty good way to save papers, as I could erase my answers over and over again from those unfortunate mistakes. Categorizing protoplanetary disks is pretty fun in a sense. The curry soup served at the dinning hall today during lunch was awesome! 

### September 24, 2019
Spent an hour and half discussing with a bunch of people about a separation of variables in a distribution function of galaxies involving potential and velocities. Have no idea how RNA and protein folding work but still need to figure it out. Let me count what's left: Ciesa 2011, learning to make a database, PSF, GSD, a travel journal, and fixing my bike!

### September 25, 2019
Me trying to build a database. Image credit to Dank Matter Astrophysics Meme. 
![](https://raw.githubusercontent.com/rywjhzd/rywjhzd.github.io/master/images/blog/2019-09-25.jpg)

### September 26, 2019
Today I went to a talk given by Rob Phillips about deciphering genomes. He was a great speaker. He summarized his job as to figure out a translation map so that people can read something in a language they don't know. I only wish that I could know more about biology to understand what he said. Also, something funny here. I was told that finding needles in haystacks is some sort of art. I have no comments on this subject. 

As for astronomy, I learned a bit about classifications of young stellar objects (YSOs) based on spectral energy distribution. Different classifications can be ambiguous depending on inclinations of YSOs. This is getting more and more interesting. I expect to finish several more chapters later on. 


## Week 2
### September 27, 2019
Technology can bridge up science with publics. Gonna learn Djanbo and Three.js in the next couple of weeks or so, in order to build a database and a playable 3D geometry. 

### September 28, 2019
Worked on GSD and watched tutorial for Django for a bit. I cooked beef ball ramen today and it was delicious. That sort of compensated this boring Saturday.

### September 29, 2019
Did not work on anything substantially. 

### September 30, 2019
Spent a hell long time on an integral. I might need to retake some math classes. 

### October 1, 2019
Graphically, dark color backgrounds look cooler to me. Learning a new programming language really takes some efforts. How to get better? We are talking about PRACTICE man!

### October 2, 2019
At least the sun came out today. To be frank, I could not see the point of putting peanut butter sauce into everything. Relief of Leiden is tomorrow. Going for a short vacation. 

### October 3 - 6, 2019
Vacation.

## Week 3
### October 7, 2019
Watched several more tutorial videos for Django. Read some stuff for courseworks.

### October 8, 2019
Did some grad app researches. 

### October 9, 2019
Worked on disk model and GSD. Watched Ad Astra tonight with some other Sterrewacht people. The lines are good but the plot does not make sense. 

### October 10, 2019
Created a disk catalog web framework today. For now it contains an object name and its corresponding category. The admin interface has been also updated.


## Week 4
### October 11, 2019
Created subviews under disk sessions, plus a template for the database. Need to add some details about all the disks. 

### October 12, 2019
Worked on GSD assignment and did some researches for grad schools. 

### October 13, 2019
Trying to add disk details as subviews.

### October 14, 2019
The previous online table was very unstable when adding in large datasets. Very high probability of crushing. Also having trouble ordering the items. Rewrote the structure with different templates. 

### October 15, 2019
Spent most of my time on GSD and BPH assignments. 

### October 16, 2019
Met with Matt today and talked about the next step. Need some minor fixes for the table. Also, a function to read in .txt or .csv files for massive data for the input. Gonna start playing around with 3D models.

### October 17, 2019
Worked on GSD, BPH, and PFS. 


## Week 5
### October 18, 2019
Worked on BPH.

### October 19, 2019
Coached a basketball practice lesson. 

### October 20, 2019
Finished BPH. 

### October 21, 2019
Worked on PFS. 

### October 22, 2019
Worked on GSD and PFS. Changed font styles of input data to null and redesigned the table format to be Bootstrap 4. Still need to reconstruct the database and reboot the webpage. 

### October 23, 2019
Worked on GSD and PFS. 

### October 24, 2019
Spent my trying to work out a way to host the server. Either convert the app into a static site or redesign the whole thing to be static.


## Week 6 
### October 25, 2019
Tried some simple js primitives. A cube can rotate now. 

### October 26, 2019
Procrastination. 

### October 27, 2019
Worked on GSD, BPH, and PFS.

### October 28, 2019
Successfully reproduced the constructive solid geometry example in three.js, except the background plane not in grid. 

### October 29, 2019
Worked on BPH and GSD.

### October 30, 2019
Tried several distributions of the geometries in three.js. Worked on BPH.

### October 31, 2019
Created a holo disk in addition to the original one. Worked on PFS and BPH. 


## Week 7
### November 1, 2019
Met with Matt and discussed web hosting. The next step is to add curvature to the disk and shade it. 

### November 4, 2019
Worked on GSD, BPH, and PFS.

### November 5, 2019
Worked on GSD and PFS. 

### November 6, 2019
Worked on PFS. 

### November 7, 2019
Worked on PFS. Tried to cut meshes, but not working ideally. 


## Week 8
### November 8, 2019
Discussed with Matt and Christian about the project. Will start importing disk data into the database. Also, figured out mesh cutting and color shading. 

### November 10, 2019
Recreated database models. Added import/export options in admin. Learned about making reporting tools based on xls. 

### November 11, 2019
Worked on GSD. 

### November 12, 2019
Worked on GSD and BPH. Had a discussion on possible improvements of the global waste management. 

### November 13, 2019
Worked on PFS and BPH. Discussed with friends about the animals in different countries and cultures and learned some very interesting facts. 

### November 14, 2019
Redefined variables names in models.py to match with the requirements. Edited labels of rows and columns in .csv files to qualify for importing. Disk data imported successfully after several tests. The old table format Bootstrap4 misplaced the query button so replaced it by Material Design. Cleaned up the navigation bar. Added instructions for usage in the source git. References will be linked manually later. Still need some minor fixes, but the database should be ready for now.


## Week 9
### November 15, 2019
Met with Matt and confirmed the database. Starting CSG. 

### November 16, 2019
Spent too much time on histories of battles. 

### November 17, 2019
Worked on BPH. 

### November 18, 2019
Worked on BPH and GSD. 

### November 19, 2019
Worked on GSD, BPH, and PFS. 

### November 20, 2019
Worked on GSD and BPH. Helped a friend on her proposal for MASCARA. 

### November 21, 2019
Worked on GSD and prepared for BPH presentation. 


## Week 10
### November 22, 2019
Cut two spheres on top and at bottom of the cube in the middle to create curvatures. Replacing the cube with the disk and shading the color using the normal function would be the next step. 

### November 23, 2019
Worked on BPH.

### November 24, 2019
Prepared for finals.

### November 25, 2019
Worked on GSD. 

### November 26, 2019
Prepared for BPH presentation and GSD paper review. Revised personal statement. 

### November 27, 2019
Prepared for BPH presentation. Tried to cut the meshes but code not working as expected. Will discuss with Matt about this.  

### November 28, 2019
It seemed that three.js contained two different csg packages and they didn't work interchangeably. 


## Week 11
### November 29, 2019
Prepared for GSD paper review. Started BPH essay. 

### November 31, 2019
Revised statements. 

### December 2, 2019
Discussed with Matt and decided to redesign the model with lathe geometry. Recreated a beta version using spline curve and lathe, with color being normal material. 

### December 3, 2019
Prepared for GSD presentation. 

### December 4, 2019
Created a demo of solar system to see the effects of sky and floor backgrounds when zooming in and out. Started BPH final proposal. 

### December 5, 2019
Worked on BPH essay. 


## Week 12
### December 6, 2019
Created a light source to illuminate the disk using pointlight/shadowmap. Inverted spline curve directions so that face normals could point outwards. Cleaned up deprecated codes. 

### December 9, 2019
Prepared for AFS final. 

### December 10, 2019
Prepared for AFS final. Worked on BPH essay. 

### December 11, 2019
Prepared for AFS final. Worked on BPH essay. 

### December 12, 2019
Collected the number of normals. Tested light switches: no obvious effects observed, need further investigations. Calculated polarized intensities. Next step is to adjust colors based on the angle incidence. 


## Week 13
### December 13, 2019
Weekly meeting postponed to Wednesday, Dec 18. 

### December 16, 2019
Prepared for AFS finals.

### December 17, 2019
Prepared for AFS finals.

### December 18, 2019
Met with Matt today and figured out some stuff together. Recollected face normals with an efficient method. Changed the disk color back to while for further color shading. Modified color of the disk to a function of camera positions. Now rotating the camera will render different colors. 

### December 19, 2019
Worked on BPH essay. 


## Week 14
### December 20, 2019
Worked on BPH essay. Started to read for GSD finals. 

### December 23, 2019
Worked on BPH essay. 


## Week 15
### December 28, 2019
Worked on BPH essay. Prepared for GSD finals. 

### December 29, 2019
Read documents about three.js. 

### December 30, 2019
Spent the entire afternoon trying to fix the compatibility of a .exe file on OSX. 

### December 31, 2019
Finished BPH first draft. Will polish up and submit shortly.  

### January 1, 2020
Read GSD paper and prepared for final exam oral questions. 


## Week 16
### January 3, 2020
BPH final draft finished and submitted. 


## Week 17
### January 4 - 12, 2020
Vacation.


## Week 18
### January 13, 2020
Prepared for GSD finals. Reread project documents to resume the work. 

### January 14, 2020
Prepared for GSD. 

### January 15, 2020
Started to prepare for PFS final.

### January 16, 2020
Read relevant papers about protoplanetary disks and AGNs for the project and GSD. 


## Week 19
### January 17, 2020
Redefined color vector to reduce some computational expenses. Changed disk material from Basic to Physical so that it can cast shadow properly. 

### January, 20, 2020
Completed GSD.

### January, 21, 2020
Prepared for PFS final. 

### January 22, 2020
Added roughness in disk to create fully diffuse material. Calculated light polarization emitted from the central star. A problem is that the number of vertices mismatches with that of faces, leading to only half the disk polarized. Will fix that later. 

### January, 23, 2020
Replaced vertices number by face normals to create full polarization. Distinct borders between each disk sector emerged. Working on to make transitions smooth. 


## Week 20
### January 24, 2020
Reunion with Jonathan, probably the coolest astrophysicist, after leaving Santa Cruz for over a year. Talked a lot about how everything went since then. Grateful and fortunate to have him as my undergrad advisor. Lunar Spring Festival is today and Happy New Year! 

### January 27, 2020
Grad app.

### January 28, 2020
Prepared for PFS final.

### January 29, 2020
Prepared for PFS final. Worked on writing sample. 

### January 30, 2020
Completed PFS. 


## Week 21
### January 31, 2020
Tried to add a guidance panel for users. 

### February 3, 2020
Added GUI. Central star color could be changed from GUI. Attempted to change intensity and distance, unsuccessful still. Color casting from central star also not displayed on disk. 

### February 4, 2020
Added ArrowHelper to visualize the camera orientation. Direction vector normalized. Dot product with FaceHelper to generate polarizer. New classes will begin tomorrow. Hope all is well in the new semester. 

### February 5, 2020
First lecture of APS. Met some cool people. 

### February 6, 2020
Attempted to multiply arrow-up with face normals. Still need to figure out whether the calculation should be within the loop or not. 


## Week 22
### February 7, 2020
Polarized the disk light by dot product of up vectors and face normals. First lecture of COP.

### February 8, 2020
Read more about disk polarization.

### February 10, 2020
Worked on COP.

### February 11, 2020
Prepared for interview. 

### February 12, 2020
Read about Jupiter's magnetosphere and plasma physics. 

### February 13, 2020
Reconstructed the disk model in a more organized way. Separated a window for global view. Adjusted global camera position. Added GUI panel for central point light and camera. Optimized the render function. 


## Week 23
### February 14, 2020
Worked on COP.

### February 17, 2020
Added a function to compute face centroid. Recalculated polarization with a cross product between the centroid position vector from the disk center and the face normal of each facet. Reset the face color to a scalar. Changed the disk material to reflect point light. 

### February 18, 2020
Optimized camera perspective. Corrected disk parameters. Added comments. Updated project description. 

### February 19, 2020
Interview day.

### February 20, 2020
Worked on COP.


## Week 24
### February 21, 2020
Worked on COP.

### February 24, 2020
Read about scattering phase function of disks.

### February 25, 2020
Worked on COP.

### February 26, 2020
Worked on AFS. 

### February 27, 2020
Milli et al. (2017) stated that their scattering phase function was derived based on two assumptions. One of them was the azimuthally uniform dust density distribution and identical dust properties. Explanations were that only the shape of SPF would contribute to any azimuthal brightness variation along the ring, after correcting for the distance between the scatterers and the star, the ADI flux loss and the convolution by the PSF. Not quite sure the reason behind. 


### Week 25
### February 28, 2020
Matt explained to me the question I proposed. If the disk is uniformly distributed with identical dust properties, the only reason that the disk looks differently in brightness is isotropy. It's the shape of SPF, rather than the disk. Now this is clear. The next step is to test the Henyey-Greenstein scattering function, recreate the disk to a ring, and implement the function to the new ring. 

### February 29, 2020
Worked on SPF.

### March 1, 2020
Worked on COP.

### March 2, 2020
Worked on AFS.

### March 3, 2020
Read about Henyey-Greenstein scattering function and more about other scattering phase functions. 

### March 4, 2020
Plotted Henyey-Greenstein scattering function with g from -0.9 to 0.9 in 0.1 step and phi from 0 to 2pi. Replaced the lathe-geometry disk with an elliptical ring. 

### March 5, 2020
Switched core scripts to min.js for faster web loading. Created a .py version of H-G. Trivial scripts cleanup.


## Week 26
### March 6, 2020
The current ring makes use of a tube geometry with an elliptical path. A problem is that the edge is not flat but round. The ring geometry in three.js cannot create an elliptical shape. Attempted to draw an ellipse and reveal it using the extrude geometry. 

### March 7, 2020
Worked on COP.

### March 9, 2020
Prepared for SPF presentation. 

### March 10, 2020
Worked on COP. 

### March 11, 2020
Discussed with Met what to do in next couple of weeks: 1) Create an ellipse using Lathe geometry 2) Calculate the scattering angle between the observing vector(camera.getWorldDirection) and each facet of the disk(disk.geometry.faces\[i\].centroid) 3) For g=0.2, calculate H-G for each facet.

### March 12, 2020
Read for SPF.


## Week 27 -- Start working from home
### March 13, 2020
The school has paused all activities due to the spread of COVID-19. All personnels shall work from home from now until March 31. Teaching activities will be held online. Quarantines begin now. 

### March 15, 2020
Worked on COP. 

### March 16, 2020
Really difficult to concentrate on working while at home. Read a little bit about massive pre-main sequence stars. 

### March 17, 2020
Talked with Prof. Thomas Stallard about researches on aurorae and upper atmospheres of giant planets, using imaging and spectral analysis. 

### March 18, 2020
Worked on COP.

### March 19, 2020
Constructed elliptical ring. Calculated scattering angle. 


## Week 28
### March 20, 2020
Debugged H-G calculation. Still needs to figure out the output format of each function. The browser crashed multiple times due to extremely large number of facets. Temporarily working on low number of segments to reduce computational expenses. 

### March 21, 2020
Worked on finishing the rest two chapters of COP report. 

### March 22, 2020
Read for SPF. 

### March 23, 2020
Replaced normalization of H-G with respect to sum with max. 

### March 24, 2020
SPF lecture resumed online. COP nearly finished and left with state of matter and phase. 

### March 25, 2020
Midterm review of AFS. Kept debugging COP. 

### March 26, 2020
COP completed.


## Week 29
### March 27, 2020
Corrected polarization direction. Need to create the dust scattered light. 

### March 28, 2020
Read for SPF.

### March 29, 2020
Reproduced scattering phase function in Milli et al. (2017) and implemented to disk. Got some questions to ask about inconsistency of parameters used in their expression. 

### March 30, 2020
Received explanation from Julien Milli for corrections of parameters. Phase function had been successfully plotted and implemented to the disk. A new problem came out to be the nearly unnoticeable visual effect, which may require further parametric modifications.

### March 31, 2020
Forced to work offline because the electricity went down. Prepared for SPF presentation.

### April 1, 2020
Lowered g1 in phase function for more obvious visual effects. Tested virtual environment installation and activation within the directory after git clone. Started thesis document.

### April 2, 2020
Discussed with Christian to plan for the next step. First, rebuild the database categories. Then, implement the polarization efficiency to H-G and reconstruct the disk shape with a power law. Meanwhile, start working on thesis outlines. Step one finished. 


## Week 30
### April 3, 2020
Read for SPF and prepared for the presentation.

### April 4, 2020
Completed thesis outlines. 

### April 5, 2020
Reconstructed the disk shape with a power law height profile. Implemented the polarization efficiency to the polarized intensity phase function. Visual effects became barely noticeable. Need a discussion. 

### April 6, 2020
Plotted scattering angle vs phase function. The tail of the curve seemed a bit too low, probably because something went wrong with the calculation in phase function.

### April 7, 2020
Worked on thesis outline. Read for SPF. 

### April 8, 2020
Filtered out the scattering angles less than 20 degrees and set them to 20. Renormalized the phase function by diving the value at 20 degrees. 

### April 9, 2020
Rescaled the height profile to a smaller value so that the disk can be captured by the camera. Subtracted the scattering angle from pi to flip the forward and backward scattering. Color intensity looked good now.


## Week 31
### April 10, 2020
Read for SPF and SAP.

### April 11, 2020
GPU nearly burned because of the computational and graphical expenses. 

### April 13, 2020
Set the initial camera position to an inclination of 39.9 degrees as in Ginski et al. (2016). Optimized disk height profile with a smaller scale factor to avoid overloading.

### April 14, 2020
Meeting with Matt and Christian to discuss the results. Need to replot the total intensity, the polarized intensity, and the polarization efficiency. Also, formalized the plots to paper-ready level. 

### April 15, 2020
Converted scattering angles to degrees. Changed plot labels. Added legends and grids.

### April 16, 2020
Started to write the method chapter. 


## Week 32
### April 17, 2020
Kept writing. Prepared for SPF presentation. 

### April 20, 2020
Worked on SAP.

### April 21, 2020
Kept writing.

### April 22, 2020
A super busy week. Worked on SPF and SAP. Kept reading papers and writing my thesis. Very hard time, difficult to pump up and concentrate. 

### April 23, 2020
Conducted SPF presentation. Kept writing. 


## Week 33
### April 24, 2020
Worked on SAP. Read for thesis.

### April 25, 2020
Kept writing.

### April 26, 2020
Collected some thesis references. Found that a new g1 value in HG could be applied to correct the overwhelming forward scattering. Will discuss and try. 

### April 27, 2020
Kept writing. 

### April 28, 2020
Worked on SAP and SPF.

### April 29, 2020
Worked on SAP and SPF. Kept writing. 

### April 30, 2020
Kept writing. Tested astropy curve fitting. 


## Week 34
### May 1, 2020
Received disk data of HD97048 in Ginski et al. (2016) and Tazaki et al. (2019). Worked on curve fitting. Prepared for SAP presentation. Worked on SAP proposal. 

### May 2, 2020
Completed SAP proposal. Attempted astropy and scipy curve fitting. 

### May 3, 2020
Started SAP and SPF essay. Read about planetary atmospheres. 

### May 4, 2020
Worked on SAP and SPF essay. 

### May 5, 2020
Worked on SAP and SPF essay. Resumed thesis writing. 

### May 6, 2020
Plotted normalized flux and phase functions in Ginski et al. (2016) and Tazaki et al. (2019). The degree of polarization in Tazaki returned NaN because of the extremely tiny values. Need a discussion. 

### May 7, 2020
Fitted normalized flux of HD97048 with two and three component HG functions (HG2, HG3) and a fourth-order polynomial. The polynomial fit seems return the best result. BCCP and BPCP models were fitted with HG2 and HG3 as well, yet resulted a poor fit. The problem is that Z11 seems to be an exponential polynomial, which can be expressed with a Bell polynomial. However, it can only have a rising tail when x changes signs, not possible in this case as there is no negative scattering angle. Will try a different initial function. 


## Week 35
### May 8, 2020
Successfully fitted a polynomial to BCCA and BPCA by converting the exponential decay to into log scale. A 7th order or higher order polynomial appeared to be the best fit in all three models. Implemented the polynomial fits to the disk. Took a lot of efforts to translate from python to javascript. Still need to set the color scalar with the new intensity phase function. 

### May 9, 2020
The color shading kept return oversaturation. Debugged it with the correct radian-degree conversion.  

### May 10, 2020
Normalized BCCP and BPCA models to their peak value. Successfully generated phase function plots with correct ranges of scattering angles. Worked on thesis writing.

### May 11, 2020
Changed plot to marker scatter for clearer result. Shaded the side to dark if the tilted angle angle more than 90 degrees. Result seemed weird. Attempted with a different approach. 